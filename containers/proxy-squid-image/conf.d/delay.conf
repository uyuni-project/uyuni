# Limit Squid's total bandwidth to 512Kbps
delay_pools 2

# Delay pool 1
# Cap all connections to 512Kbps
delay_class 1 1
delay_access 1 allow all
delay_parameters 1 64000/64000

# Delay pool 2
# Do not limit bandwidth on local network(s) for any contents that have already been cached onto the proxy
acl myendpoints1 src 192.168.1.0/24
acl myendpoints2 src 192.168.122.0/24
delay_class 2 2
delay_access 2 allow myendpoints1 myendpoints2
delay_access 2 deny all
# -1/-1 means that there are no limits
delay_parameters 2 -1/-1 -1/-1