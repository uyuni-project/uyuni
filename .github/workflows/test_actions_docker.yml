name: hello-world
on: pull_request
jobs:
  test-uyuni:
    runs-on: ubuntu-latest
    steps:
      - name: my-step
        run: echo "Hello World!"
      - uses: actions/checkout@v3
      - uses: isbang/compose-action@v1.4.1
      - name: wait a bit
        run: sleep 30s  
      - name: dockerps
        run: docker ps
      - name: install-deps
        run: sudo apt-get install -y nmap
      - name: nmap_from_host
        run: nmap server-httpd-test
      - name: docker-networks
        run: docker network ls
      - name: test_from_host
        run: curl http://localhost:1234/test.html
      - name: test_from_container
        uses: docker://ghcr.io/jordimassaguerpla/uyuni/controller:master
        with:
          entrypoint: curl
          args: http://localhost:1234/test.html
      - name: last-step
        run: echo "bye bye!"


