# Setup cherrypy
rest_cherrypy:
  port: 9080
  host: 127.0.0.1
  collect_stats: false
  disable_ssl: true
  ssl_crt: /etc/pki/tls/certs/spacewalk.crt
  ssl_key: /etc/pki/tls/private/spacewalk.key

# Setup API authentication
external_auth:
  auto:
    admin:
      - .*
      - '@wheel'
      - '@runner'
      - '@jobs'

# Configure different file roots. Custom salt states should only be placed in /srv/salt.
# Users should not touch other directories listed here.
file_roots:
  base:
    - /usr/share/susemanager/salt
    - /usr/share/susemanager/formulas/states
    - /srv/susemanager/salt
    - /srv/salt

# Configure different pillar roots. Custom pillar data should only be placed in /srv/pillar.
# Users should not touch other directories listed here.
pillar_roots:
  base:
    - /srv/pillar

# Extension modules path
extension_modules: /usr/share/susemanager/modules

# Master top configuration
master_tops:
  mgr_master_tops: True

# Configure external pillar
ext_pillar:
  - suma_minion: True

# Scalability configuration parameters

# Avoids Salt timeouts in case many minions are accepted (in the hundreds range) and
# at least a few of them respond slowly. Default value is 5 and leads to the following
# error:
# Salt request timed out. The master is not responding. If this error persists after
# verifying the master is up, worker_threads may need to be increased
worker_threads: 10

# Wait for slow minions, or long running operations, longer. Default is 15s in total.
# Raise the timeout after 4 minutes.
timeout: 120
gather_job_timeout: 120

# Ensure that certifi is part of the thin
thin_extra_mods: certifi
