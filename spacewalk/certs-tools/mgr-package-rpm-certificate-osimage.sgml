<!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook V3.1//EN" [
<!ENTITY mgr-package-rpm-certificate-osimage "SUSE Manager OS image SSL Maintenance Tool">

]>
<refentry>

<RefMeta>
<RefEntryTitle>mgr-package-rpm-certificate-osimage</RefEntryTitle><manvolnum>1</manvolnum>
<RefMiscInfo>Version 1.0.0</RefMiscInfo>
</RefMeta>

<RefNameDiv>
<RefName><command>mgr-package-rpm-certificate-osimage</command></RefName>
<RefPurpose>
Generate RPM package containing the CA certificate for the server
</RefPurpose>
</RefNameDiv>

<RefSynopsisDiv>
<Synopsis>
    <cmdsynopsis>
        <command>mgr-package-rpm-certificate-osimage</command>
        <arg>options <replaceable>...</replaceable></arg>
        <command>--help</command>
    </cmdsynopsis>
    <cmdsynopsis>
        <command>rhn-ssl-tool --ca-cert-full-path<replaceable>CA_CERT_FULL_PATH</replaceable></command>
        <arg>options <replaceable>...</replaceable></arg>
    </cmdsynopsis>
</Synopsis>
</RefSynopsisDiv>

<RefSect1><Title>Help</Title>
<simplelist>
    <member><command>mgr-package-rpm-certificate-osimage --help</command></member>
    <member><command>mgr-package-rpm-certificate-osimage --ca-cert-full-path</command></member>
</simplelist>
</RefSect1>

<RefSect1><Title>Description</Title>

    <para>The <command>mgr-package-rpm-certificate-osimage</command>) is used to
    generate the RPM package containing the SUSE Manager's CA certificate.</para>

    <para>This RPM is used in OS image build process to trust SUSE Manager when
    accessing its channels. The RPM is the same as the one created by
    <emphasis>rhn-ssl-tool</emphasis> with the only difference that the RPM
    generated by <command>mgr-package-rpm-certificate-osimage</command> is depending
    on `ca-certificates` to make Kiwi into installing the whole trust chain</para>

    <para>The most current Red Hat Satellite Servers use
    <emphasis>/root/ssl-build</emphasis> as the default build directory.
    Older Red Hat Satellites and Proxies used the
    <emphasis>/etc/sysconfig/rhn/ssl</emphasis> directory, and *very* old
    installations used <emphasis>/etc/sysconfig/rhn</emphasis>.</para>

    <para>Normally, on new installations, <command>mgr-package-rpm-certificate-osimage
    </command> is automatically called upon installation.
    For upgrades, system administrator should call <command>mgr-package-rpm-certificate-osimage
    </command>.
    If the command is called without parameters, it tries to package the certificate
    found in the default directory <emphasis>/root/ssl-build</emphasis>.
    If the generated CA certificate is in another directory, the full path of the
    certificate must be specified by using
    <emphasis>--ca-cert-full-path CA_CERT_FULL_PATH</emphasis></para>

    The generated RPM will be placed in: <emphasis>/usr/share/susemanager/salt/images</emphasis>.
    If a RPM is already present in the target location, it will be overwritten.

</RefSect1>

<RefSect1><Title>See Also</Title>
<simplelist>
    <member>rhn-ssl-tool</member>
    <member>openssl(1)</member>
    <member>rpm(8)</member>
</simplelist>
</RefSect1>

<RefSect1><Title>Author</Title>
<simplelist>
    <member>Michele Bologna<email>michele.bologna@suse.com</email></member>
</simplelist>
</RefSect1>
</RefEntry>
